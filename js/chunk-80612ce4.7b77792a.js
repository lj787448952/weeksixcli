(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-80612ce4"],{"4a6a":function(t,e,c){"use strict";c.r(e);var n=c("7a23"),i={class:"container"},l={class:"table mt-4"},a=Object(n["i"])("thead",null,[Object(n["i"])("tr",null,[Object(n["i"])("th",null,"購買時間"),Object(n["i"])("th",null,"Email"),Object(n["i"])("th",null,"購買款項"),Object(n["i"])("th",null,"應付金額"),Object(n["i"])("th",null,"是否付款"),Object(n["i"])("th",null,"編輯")])],-1),r=Object(n["i"])("td",null,[Object(n["i"])("p",null,"filter.date 出錯無法抓取時間")],-1),o={class:"list-unstyled"},d={class:"form-check form-switch"},b={key:0},s={key:1},u={class:"btn-group"};function O(t,e,c,O,j,p){var f=Object(n["D"])("OrderModal"),h=Object(n["D"])("DelModal");return Object(n["u"])(),Object(n["e"])("div",i,[Object(n["i"])("table",l,[a,Object(n["i"])("tbody",null,[(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["B"])(j.orders,(function(t,e){return Object(n["u"])(),Object(n["e"])(n["a"],{key:e},[j.orders.length?(Object(n["u"])(),Object(n["e"])("tr",{key:0,class:{"text-secondary":!t.is_paid}},[r,Object(n["i"])("td",null,[t.user?(Object(n["u"])(),Object(n["e"])("span",{key:0,textContent:Object(n["G"])(t.user.email)},null,8,["textContent"])):Object(n["f"])("",!0)]),Object(n["i"])("td",null,[Object(n["i"])("ul",o,[(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["B"])(t.products,(function(t,e){return Object(n["u"])(),Object(n["e"])("li",{key:e},Object(n["G"])(t.product.title)+" 數量: "+Object(n["G"])(t.qty)+" "+Object(n["G"])(t.product.unit),1)})),128))])]),Object(n["i"])("td",null,Object(n["G"])(t.total),1),Object(n["i"])("td",null,[Object(n["i"])("div",d,[Object(n["Q"])(Object(n["i"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(t.id),"onUpdate:modelValue":function(e){return t.is_paid=e},onChange:function(e){return p.updatePaid(t)}},null,40,["id","onUpdate:modelValue","onChange"]),[[n["J"],t.is_paid]]),Object(n["i"])("label",{class:"form-check-label",for:"paidSwitch".concat(t.id)},[t.is_paid?(Object(n["u"])(),Object(n["e"])("span",b," 已付款")):(Object(n["u"])(),Object(n["e"])("span",s,"未付款"))],8,["for"])])]),Object(n["i"])("td",null,[Object(n["i"])("div",u,[Object(n["i"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(e){return p.openModal(t)}}," 檢視 ",8,["onClick"]),Object(n["i"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(e){return p.openDelOrderModal(t)}}," 刪除 ",8,["onClick"])])])],2)):Object(n["f"])("",!0)],64)})),128))])]),Object(n["i"])(f,{order:j.tempOrder,ref:"orderModal",onUpdatePaid:p.updatePaid},null,8,["order","onUpdatePaid"]),Object(n["i"])(h,{product:t.tempOrders,onDelItem:p.delOrder,ref:"delModal"},null,8,["product","onDelItem"])])}var j=c("5530"),p=(c("99af"),c("b0c0"),Object(n["S"])("data-v-4028096a"));Object(n["x"])("data-v-4028096a");var f={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},h={class:"modal-dialog modal-xl",role:"document"},m={class:"modal-content border-0"},v=Object(n["i"])("div",{class:"modal-header bg-dark text-white"},[Object(n["i"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(n["i"])("span",null,"訂單細節")]),Object(n["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),y={class:"modal-body"},g={class:"row"},k={class:"col-md-4"},w=Object(n["i"])("h3",null,"用戶資料",-1),M={class:"table"},x={key:0},P=Object(n["i"])("th",{style:{width:"100px"}},"姓名",-1),D=Object(n["i"])("th",null,"Email",-1),G=Object(n["i"])("th",null,"電話",-1),_=Object(n["i"])("th",null,"地址",-1),C={class:"col-md-8"},$=Object(n["i"])("h3",null,"訂單細節",-1),L={class:"table"},S=Object(n["i"])("th",{style:{width:"100px"}},"訂單編號",-1),U=Object(n["i"])("tr",null,[Object(n["i"])("th",null,"下單時間"),Object(n["i"])("td",null,[Object(n["i"])("p",null,"filter無法抓去時間")])],-1),E=Object(n["i"])("tr",null,[Object(n["i"])("th",null,"付款時間"),Object(n["i"])("td",null,[Object(n["i"])("span",null,[Object(n["i"])("p",null,"filter無法抓去時間")]),Object(n["i"])("span",null,"時間不正確")])],-1),I=Object(n["i"])("th",null,"付款狀態",-1),J={key:0,class:"text-success"},B={key:1,class:"text-muted"},V=Object(n["i"])("tr",null,[Object(n["i"])("th",null,"總金額"),Object(n["i"])("td",null," filter無法運作 ")],-1),q=Object(n["i"])("h3",null,"選購商品",-1),N={class:"table"},Q=Object(n["i"])("thead",null,[Object(n["i"])("tr")],-1),F={class:"text-end"},z={class:"d-flex justify-content-end"},A={class:"form-check"},H={class:"form-check-label",for:"flexCheckDefault"},K={key:0},R={key:1},T={class:"modal-footer"},W=Object(n["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);Object(n["v"])();var X=p((function(t,e,c,i,l,a){return Object(n["u"])(),Object(n["e"])("div",f,[Object(n["i"])("div",h,[Object(n["i"])("div",m,[v,Object(n["i"])("div",y,[Object(n["i"])("div",g,[Object(n["i"])("div",k,[w,Object(n["i"])("table",M,[l.tempOrder.user?(Object(n["u"])(),Object(n["e"])("tbody",x,[Object(n["i"])("tr",null,[P,Object(n["i"])("td",null,Object(n["G"])(l.tempOrder.user.name),1)]),Object(n["i"])("tr",null,[D,Object(n["i"])("td",null,Object(n["G"])(l.tempOrder.user.email),1)]),Object(n["i"])("tr",null,[G,Object(n["i"])("td",null,Object(n["G"])(l.tempOrder.user.tel),1)]),Object(n["i"])("tr",null,[_,Object(n["i"])("td",null,Object(n["G"])(l.tempOrder.user.address),1)])])):Object(n["f"])("",!0)])]),Object(n["i"])("div",C,[$,Object(n["i"])("table",L,[Object(n["i"])("tbody",null,[Object(n["i"])("tr",null,[S,Object(n["i"])("td",null,Object(n["G"])(l.tempOrder.id),1)]),U,E,Object(n["i"])("tr",null,[I,Object(n["i"])("td",null,[l.tempOrder.is_paid?(Object(n["u"])(),Object(n["e"])("strong",J,"已付款")):(Object(n["u"])(),Object(n["e"])("span",B,"尚未付款"))])]),V])]),q,Object(n["i"])("table",N,[Q,Object(n["i"])("tbody",null,[(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["B"])(l.tempOrder.products,(function(e){return Object(n["u"])(),Object(n["e"])("tr",{key:e.id},[Object(n["i"])("th",null,Object(n["G"])(e.product.title),1),Object(n["i"])("td",null,Object(n["G"])(e.qty)+" / "+Object(n["G"])(e.product.unit),1),Object(n["i"])("td",F,Object(n["G"])(t.$filters.currency(e.final_total)),1)])})),128))])]),Object(n["i"])("div",z,[Object(n["i"])("div",A,[Object(n["Q"])(Object(n["i"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[1]||(e[1]=function(t){return l.tempOrder.is_paid=t})},null,512),[[n["J"],l.tempOrder.is_paid]]),Object(n["i"])("label",H,[l.tempOrder.is_paid?(Object(n["u"])(),Object(n["e"])("span",K,"已付款")):(Object(n["u"])(),Object(n["e"])("span",R,"未付款"))])])])])])]),Object(n["i"])("div",T,[W,Object(n["i"])("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=function(e){return t.$emit("update-paid",l.tempOrder)})}," 修改付款狀態 ")])])])],512)})),Y=c("7c2b"),Z=c.n(Y),tt={props:{order:{type:Object,default:function(){return{}}}},data:function(){return{status:{},modal:"",tempOrder:{}}},emit:["update-product"],watch:{order:function(){this.tempOrder=this.order}},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new Z.a(this.$refs.modal)}};c("6e45");tt.render=X,tt.__scopeId="data-v-4028096a";var et=tt,ct=c("6ff1"),nt={data:function(){return{orders:{},isNew:!1,pagination:{},isLoading:!1,tempOrder:{},currentPage:1}},components:{OrderModal:et,DelModal:ct["a"]},methods:{getOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=e;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("lj787448952","/admin/orders?page=").concat(e);this.isLoading=!0,this.$http.get(c,this.tempProduct).then((function(e){console.log(e),t.orders=e.data.orders,t.pagination=e.data.pagination,t.isLoading=!1}))},updatePaid:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("lj787448952","/admin/order/").concat(t.id),n={is_paid:t.is_paid};this.$http.put(c,{data:n}).then((function(t){console.log(t),e.isLoading=!1;var c=e.$refs.orderModal;c.hideModal(),e.getOrders(e.currentPage)}))},delOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","/api/").concat("lj787448952","/admin/order/").concat(this.tempOrder.id);this.isLoading=!0,this.$http.delete(e).then((function(e){var c=t.$refs.delModal;c.hideModal(),t.getOrders(t.currentPage),console.log(e)}))},openModal:function(t){this.tempOrder=Object(j["a"])({},t),this.isNew=!1;var e=this.$refs.orderModal;e.openModal()},openDelOrderModal:function(t){this.temporder=Object(j["a"])({},t);var e=this.$refs.delModal;e.openModal()}},created:function(){this.getOrders()},mounted:function(){}};nt.render=O;e["default"]=nt},5530:function(t,e,c){"use strict";c.d(e,"a",(function(){return l}));c("b64b"),c("a4d3"),c("4de4"),c("e439"),c("159b"),c("dbb4");function n(t,e,c){return e in t?Object.defineProperty(t,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[e]=c,t}function i(t,e){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),c.push.apply(c,n)}return c}function l(t){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{};e%2?i(Object(c),!0).forEach((function(e){n(t,e,c[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):i(Object(c)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))}))}return t}},"6e45":function(t,e,c){"use strict";c("df43")},"6ff1":function(t,e,c){"use strict";var n=c("7a23"),i=Object(n["S"])("data-v-a2190cb2");Object(n["x"])("data-v-a2190cb2");var l={class:"container"},a={id:"delModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},r={class:"modal-dialog"},o={class:"modal-content border-0"},d={class:"modal-header bg-danger text-white"},b={id:"delProductModalLabel",class:"modal-title"},s=Object(n["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),u={class:"modal-body"},O=Object(n["h"])(" 是否刪除 "),j={class:"text-danger"},p=Object(n["h"])(" 商品(刪除後將無法恢復)。 "),f={class:"modal-footer"},h=Object(n["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);Object(n["v"])();var m=i((function(t,e,c,i,m,v){return Object(n["u"])(),Object(n["e"])("div",l,[Object(n["i"])("div",a,[Object(n["i"])("div",r,[Object(n["i"])("div",o,[Object(n["i"])("div",d,[Object(n["i"])("h5",b,[Object(n["i"])("span",null,"刪除"+Object(n["G"])(c.product.title),1)]),s]),Object(n["i"])("div",u,[O,Object(n["i"])("strong",j,Object(n["G"])(c.product.title),1),p]),Object(n["i"])("div",f,[h,Object(n["i"])("button",{type:"button",class:"btn btn-danger",onClick:e[1]||(e[1]=function(e){return t.$emit("del-item")})}," 確認刪除 ")])])])],512)])})),v=c("7c2b"),y=c.n(v),g={props:{product:{type:Object,default:function(){return{}}}},data:function(){return{modal:""}},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new y.a(this.$refs.modal)}};c("e8b6");g.render=m,g.__scopeId="data-v-a2190cb2";e["a"]=g},b0c0:function(t,e,c){var n=c("83ab"),i=c("9bf2").f,l=Function.prototype,a=l.toString,r=/^\s*function ([^ (]*)/,o="name";n&&!(o in l)&&i(l,o,{configurable:!0,get:function(){try{return a.call(this).match(r)[1]}catch(t){return""}}})},c044:function(t,e,c){},dbb4:function(t,e,c){var n=c("23e7"),i=c("83ab"),l=c("56ef"),a=c("fc6a"),r=c("06cf"),o=c("8418");n({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,c,n=a(t),i=r.f,d=l(n),b={},s=0;while(d.length>s)c=i(n,e=d[s++]),void 0!==c&&o(b,e,c);return b}})},df43:function(t,e,c){},e439:function(t,e,c){var n=c("23e7"),i=c("d039"),l=c("fc6a"),a=c("06cf").f,r=c("83ab"),o=i((function(){a(1)})),d=!r||o;n({target:"Object",stat:!0,forced:d,sham:!r},{getOwnPropertyDescriptor:function(t,e){return a(l(t),e)}})},e8b6:function(t,e,c){"use strict";c("c044")}}]);
//# sourceMappingURL=chunk-80612ce4.7b77792a.js.map