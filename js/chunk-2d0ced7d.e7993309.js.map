{"version":3,"sources":["webpack:///./src/views/ProductsLazy.vue","webpack:///./src/views/ProductsLazy.vue?9a3a"],"names":["class","style","href","id","ref","product","addToCart","products","imageUrl","categories","item","aria-current","key","selectCategory","filterProducts","src","alt","to","title","price","origin_price","content","type","getProduct","disabled","loadingStatus","loadingItem","myFavorite","includes","addMyFavorite","storageMethods","save","favorite","favoriteString","JSON","stringify","localStorage","setItem","get","parse","getItem","console","log","name","data","isloading","pagination","components","UserProductModal","created","this","getProducts","methods","splice","indexOf","push","page","url","$http","then","res","success","getCategories","setTimeout","isLoading","alert","message","Set","forEach","add","category","$refs","userProductModal","openModal","qty","cart","product_id","hideModal","post","emit","getCart","scrollFunction","domGetNewPage","window","addEventListener","windowY","scrollY","windowHeight","innerHeight","domPosition","offsetTop","has_next","current_page","computed","filter","match","mounted","unmounted","removeEventListener","render"],"mappings":"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","file":"js/chunk-2d0ced7d.e7993309.js","sourcesContent":["<template>\n  <!-- <div class=\"container\">\n    <h1>產品列表</h1>\n    <Loading :active=\"isLoading\"></Loading>\n    <table class=\"table align-middle\">\n      <thead>\n        <tr>\n          <th>圖片</th>\n          <th>商品名稱</th>\n          <th>價格</th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in products\" :key=\"item.id\">\n          <td style=\"width: 200px\">\n            <div\n              style=\"\n                height: 100px;\n                background-size: cover;\n                background-position: center;\n              \"\n              :style=\"{\n                backgroundImage: `\n                            url(${item.imageUrl} )\n                               `,\n              }\"\n            ></div>\n          </td>\n\n          <td>\n            {{ item.title }}\n          </td>\n\n          <td>\n            <div class=\"h5\" v-if=\"!item.price\">\n              {{ item.origin_price }}\n            </div>\n\n            <del class=\"h6\" v-if=\"item.price\">\n              原價{{ item.origin_price }} 元\n            </del>\n            <div class=\"h5\" v-if=\"item.price\">現在只要 {{ item.price }} 元</div>\n          </td>\n\n          <td>\n            <div class=\"btn-group btn-group-sm\">\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-secondary\"\n                @click=\"getProduct(item.id)\"\n                :disabled=\"\n                  loadingStatus.loadingItem === item.id || !item.is_enabled\n                \"\n              >\n                <i\n                  class=\"fas fa-spinner fa-pulse\"\n                  v-if=\"loadingStatus.loadingItem === item.id\"\n                ></i>\n                查看更多\n              </button>\n\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger\"\n                @click=\"addToCart(item.id)\"\n                :disabled=\"\n                  loadingStatus.loadingItem === item.id || !item.is_enabled\n                \"\n              >\n                <i\n                  class=\"fas fa-spinner fa-pulse\"\n                  v-if=\"loadingStatus.loadingItem === item.id\"\n                ></i>\n                加到購物車\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div> -->\n\n  <UserProductModal\n    ref=\"userProductModal\"\n    :product=\"product\"\n    @add-to-cart=\"addToCart\"\n  ></UserProductModal>\n  <!-- <Pagination :pages=\"pagination\" @emit-pages=\"getData\"></Pagination> -->\n\n  <div\n    class=\"position-relative d-flex align-items-center justify-content-center\"\n    style=\"min-height: 400px\"\n  >\n    <div\n      class=\"position-absolute\"\n      style=\"\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n\n        background-position: center center;\n        opacity: 0.1;\n      \"\n      :style=\"{ backgroundImage: `url(${products.imageUrl} )` }\"\n    ></div>\n    <h2 class=\"fw-bold\">Lorem ipsum.</h2>\n  </div>\n  <div class=\"container mt-md-5 mt-3 mb-7\">\n    <div class=\"row\">\n      <div class=\"col-md-4\">\n        <div class=\"list-group\">\n          <a\n            href=\"#\"\n            class=\"list-group-item list-group-item-action active\"\n            aria-current=\"true\"\n            v-for=\"item in categories\"\n            :key=\"item.id\"\n            @click.prevent=\"selectCategory = item\"\n          >\n            {{ item }}\n          </a>\n        </div>\n      </div>\n      <div class=\"col-md-8\">\n        <div class=\"row\">\n          <div class=\"col-md-6\" v-for=\"item in filterProducts\" :key=\"item.id\">\n            <div class=\"card border-0 mb-4 position-relative position-relative\">\n              <img\n                :src=\"item.imageUrl\"\n                class=\"card-img-top rounded-0\"\n                alt=\"...\"\n              />\n              <a href=\"#\" class=\"text-dark\">\n                <i\n                  class=\"far fa-heart position-absolute\"\n                  style=\"right: 16px; top: 16px\"\n                ></i>\n              </a>\n              <div class=\"card-body p-0\">\n                <h4 class=\"mb-0 mt-3\">\n                  <router-link :to=\"`/product/${item.id}`\">\n                    {{ item.title }}</router-link\n                  >\n                </h4>\n                <p class=\"card-text mb-0\">\n                  {{ item.price }}\n                  <span class=\"text-muted\"\n                    ><del> 原價 {{ item.origin_price }}</del></span\n                  >\n                </p>\n                <p class=\"text-muted mt-3\">現在只要{{ item.content }}</p>\n              </div>\n              <div class=\"btn-group btn-group-sm\">\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-secondary\"\n                  @click=\"getProduct(item.id)\"\n                  :disabled=\"\n                    loadingStatus.loadingItem === item.id || !item.is_enabled\n                  \"\n                >\n                  <i\n                    class=\"fas fa-spinner fa-pulse\"\n                    v-if=\"loadingStatus.loadingItem === item.id\"\n                  ></i>\n                  查看更多\n                </button>\n\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-danger\"\n                  @click=\"addToCart(item.id)\"\n                  :disabled=\"\n                    loadingStatus.loadingItem === item.id || !item.is_enabled\n                  \"\n                >\n                  <i\n                    class=\"fas fa-spinner fa-pulse\"\n                    v-if=\"loadingStatus.loadingItem === item.id\"\n                  ></i>\n                  加到購物車\n                </button>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-success\"\n                  @click=\"addMyFavorite(item)\"\n                  :class=\"{ active: myFavorite.includes(item.id) }\"\n                >\n                  我的最愛\n                </button>\n              </div>\n            </div>\n          </div>\n          <!-- <div class=\"col-md-6\">\n            <div class=\"card border-0 mb-4 position-relative position-relative\">\n              <img\n                src=\"https://images.unsplash.com/photo-1591843336741-9f1238f66758?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1867&q=80\"\n                class=\"card-img-top rounded-0\"\n                alt=\"...\"\n              />\n              <a href=\"#\" class=\"text-dark\">\n                <i\n                  class=\"far fa-heart position-absolute\"\n                  style=\"right: 16px; top: 16px\"\n                ></i>\n              </a>\n              <div class=\"card-body p-0\">\n                <h4 class=\"mb-0 mt-3\">\n                  <a href=\"./detail.html\">Lorem ipsum</a>\n                </h4>\n                <p class=\"card-text mb-0\">\n                  NT$1,080 <span class=\"text-muted\"><del>NT$1,200</del></span>\n                </p>\n                <p class=\"text-muted mt-3\"></p>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-md-6\">\n            <div class=\"card border-0 mb-4 position-relative position-relative\">\n              <img\n                src=\"https://images.unsplash.com/photo-1591843336741-9f1238f66758?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1867&q=80\"\n                class=\"card-img-top rounded-0\"\n                alt=\"...\"\n              />\n              <a href=\"#\" class=\"text-dark\">\n                <i\n                  class=\"far fa-heart position-absolute\"\n                  style=\"right: 16px; top: 16px\"\n                ></i>\n              </a>\n              <div class=\"card-body p-0\">\n                <h4 class=\"mb-0 mt-3\">\n                  <a href=\"./detail.html\">Lorem ipsum</a>\n                </h4>\n                <p class=\"card-text mb-0\">\n                  NT$1,080 <span class=\"text-muted\"><del>NT$1,200</del></span>\n                </p>\n                <p class=\"text-muted mt-3\"></p>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-md-6\">\n            <div class=\"card border-0 mb-4 position-relative position-relative\">\n              <img\n                src=\"https://images.unsplash.com/photo-1591843336741-9f1238f66758?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1867&q=80\"\n                class=\"card-img-top rounded-0\"\n                alt=\"...\"\n              />\n              <a href=\"#\" class=\"text-dark\">\n                <i\n                  class=\"far fa-heart position-absolute\"\n                  style=\"right: 16px; top: 16px\"\n                ></i>\n              </a>\n              <div class=\"card-body p-0\">\n                <h4 class=\"mb-0 mt-3\">\n                  <a href=\"./detail.html\">Lorem ipsum</a>\n                </h4>\n                <p class=\"card-text mb-0\">\n                  NT$1,080 <span class=\"text-muted\"><del>NT$1,200</del></span>\n                </p>\n                <p class=\"text-muted mt-3\"></p>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-md-6\">\n            <div class=\"card border-0 mb-4 position-relative position-relative\">\n              <img\n                src=\"https://images.unsplash.com/photo-1591843336741-9f1238f66758?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1867&q=80\"\n                class=\"card-img-top rounded-0\"\n                alt=\"...\"\n              />\n              <a href=\"#\" class=\"text-dark\">\n                <i\n                  class=\"far fa-heart position-absolute\"\n                  style=\"right: 16px; top: 16px\"\n                ></i>\n              </a>\n              <div class=\"card-body p-0\">\n                <h4 class=\"mb-0 mt-3\">\n                  <a href=\"./detail.html\">Lorem ipsum</a>\n                </h4>\n                <p class=\"card-text mb-0\">\n                  NT$1,080 <span class=\"text-muted\"><del>NT$1,200</del></span>\n                </p>\n                <p class=\"text-muted mt-3\"></p>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-md-6\">\n            <div class=\"card border-0 mb-4 position-relative position-relative\">\n              <img\n                src=\"https://images.unsplash.com/photo-1591843336741-9f1238f66758?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1867&q=80\"\n                class=\"card-img-top rounded-0\"\n                alt=\"...\"\n              />\n              <a href=\"#\" class=\"text-dark\">\n                <i\n                  class=\"far fa-heart position-absolute\"\n                  style=\"right: 16px; top: 16px\"\n                ></i>\n              </a>\n              <div class=\"card-body p-0\">\n                <h4 class=\"mb-0 mt-3\">\n                  <a href=\"./detail.html\">Lorem ipsum</a>\n                </h4>\n                <p class=\"card-text mb-0\">\n                  NT$1,080 <span class=\"text-muted\"><del>NT$1,200</del></span>\n                </p>\n                <p class=\"text-muted mt-3\"></p>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-md-6\">\n            <div class=\"card border-0 mb-4 position-relative position-relative\">\n              <img\n                src=\"https://images.unsplash.com/photo-1591843336741-9f1238f66758?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1867&q=80\"\n                class=\"card-img-top rounded-0\"\n                alt=\"...\"\n              />\n              <a href=\"#\" class=\"text-dark\">\n                <i\n                  class=\"far fa-heart position-absolute\"\n                  style=\"right: 16px; top: 16px\"\n                ></i>\n              </a>\n              <div class=\"card-body p-0\">\n                <h4 class=\"mb-0 mt-3\">\n                  <a href=\"./detail.html\">Lorem ipsum</a>\n                </h4>\n                <p class=\"card-text mb-0\">\n                  NT$1,080 <span class=\"text-muted\"><del>NT$1,200</del></span>\n                </p>\n                <p class=\"text-muted mt-3\"></p>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-md-6\">\n            <div class=\"card border-0 mb-4 position-relative position-relative\">\n              <img\n                src=\"https://images.unsplash.com/photo-1591843336741-9f1238f66758?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1867&q=80\"\n                class=\"card-img-top rounded-0\"\n                alt=\"...\"\n              />\n              <a href=\"#\" class=\"text-dark\">\n                <i\n                  class=\"far fa-heart position-absolute\"\n                  style=\"right: 16px; top: 16px\"\n                ></i>\n              </a>\n              <div class=\"card-body p-0\">\n                <h4 class=\"mb-0 mt-3\">\n                  <a href=\"./detail.html\">Lorem ipsum</a>\n                </h4>\n                <p class=\"card-text mb-0\">\n                  NT$1,080 <span class=\"text-muted\"><del>NT$1,200</del></span>\n                </p>\n                <p class=\"text-muted mt-3\"></p>\n              </div>\n            </div>\n          </div> -->\n        </div>\n        <div id=\"domGetNewPage\" ref=\"domGetNewPage\"></div>\n        <nav class=\"d-flex justify-content-center\">\n          <ul class=\"pagination\">\n            <li class=\"page-item\">\n              <a class=\"page-link\" href=\"#\" aria-label=\"Previous\">\n                <span aria-hidden=\"true\">&laquo;</span>\n              </a>\n            </li>\n            <li class=\"page-item active\">\n              <a class=\"page-link\" href=\"#\">1</a>\n            </li>\n            <li class=\"page-item\"><a class=\"page-link\" href=\"#\">2</a></li>\n            <li class=\"page-item\"><a class=\"page-link\" href=\"#\">3</a></li>\n            <li class=\"page-item\">\n              <a class=\"page-link\" href=\"#\" aria-label=\"Next\">\n                <span aria-hidden=\"true\">&raquo;</span>\n              </a>\n            </li>\n          </ul>\n        </nav>\n      </div>\n    </div>\n  </div>\n  <div class=\"bg-light py-4\">\n    <div class=\"container\">\n      <div\n        class=\"\n          d-flex\n          flex-column flex-md-row\n          justify-content-between\n          align-items-md-center align-items-start\n        \"\n      >\n        <p class=\"mb-0 fw-bold\">Lorem ipsum dolor sit amet.</p>\n        <div class=\"input-group w-md-50 mt-md-0 mt-3\">\n          <input type=\"text\" class=\"form-control rounded-0\" placeholder=\"\" />\n          <div class=\"input-group-append\">\n            <button class=\"btn btn-dark rounded-0\" type=\"button\" id=\"search\">\n              Lorem ipsum\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- <div class=\"bg-dark py-5\">\n    <div class=\"container\">\n      <div\n        class=\"\n          d-flex\n          align-items-center\n          justify-content-between\n          text-white\n          mb-md-7 mb-4\n        \"\n      >\n        <a class=\"text-white h4\" href=\"./index.html\">LOGO</a>\n        <ul class=\"d-flex list-unstyled mb-0 h4\">\n          <li>\n            <a href=\"#\" class=\"text-white mx-3\"\n              ><i class=\"fab fa-facebook\"></i\n            ></a>\n          </li>\n          <li>\n            <a href=\"#\" class=\"text-white mx-3\"\n              ><i class=\"fab fa-instagram\"></i\n            ></a>\n          </li>\n          <li>\n            <a href=\"#\" class=\"text-white ms-3\"><i class=\"fab fa-line\"></i></a>\n          </li>\n        </ul>\n      </div>\n      <div\n        class=\"\n          d-flex\n          flex-column flex-md-row\n          justify-content-between\n          align-items-md-end align-items-start\n          text-white\n        \"\n      >\n        <div class=\"mb-md-0 mb-1\">\n          <p class=\"mb-0\">02-3456-7890</p>\n          <p class=\"mb-0\">service@mail.com</p>\n        </div>\n        <p class=\"mb-0\">© 2020 LOGO All Rights Reserved.</p>\n      </div>\n    </div>\n  </div> -->\n</template>\n\n<script>\nimport emitter from \"../assets/javascript/mitt\";\nimport UserProductModal from \"@/components/UserProductModal.vue\";\n\nconst storageMethods = {\n  save(favorite) {\n    // 存取時要先轉型成字串\n    const favoriteString = JSON.stringify(favorite);\n    localStorage.setItem(\"favoriteItem\", favoriteString);\n  },\n  get() {\n    return JSON.parse(localStorage.getItem(\"favoriteItem\"));\n  },\n};\nconsole.log(\"storageMethods,\", storageMethods);\n\nexport default {\n  name: \"Products\",\n  data() {\n    return {\n      products: [],\n      loadingStatus: {\n        loadingItem: \"\",\n      },\n      myFavorite: storageMethods.get() || [],\n      isloading: false,\n      product: {},\n      categories: [],\n      selectCategory: \"\",\n      pagination: {},\n    };\n  },\n  components: {\n    UserProductModal,\n  },\n  created() {\n    this.getProducts();\n  },\n  methods: {\n    addMyFavorite(item) {\n      // console.log(\"addMyfavorite\");\n      // console.log(this.product);\n      // this.myFavorite.push(item.id);\n      if (this.myFavorite.includes(item.id)) {\n        this.myFavorite.splice(this.myFavorite.indexOf(item.id), 1);\n        console.log(\"有重複\");\n      } else {\n        this.myFavorite.push(item.id);\n      }\n      console.log(this.myFavorite);\n      // storageMethods.save(this.myFavorite);\n    },\n    getProducts(page = 1) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products?page=${page}`;\n      this.$http.get(url).then((res) => {\n        console.log(res);\n        this.isloading = true;\n        if (res.data.success) {\n          console.log(res);\n          this.products = [...this.products, ...res.data.products];\n          // this.products = res.data.products;\n\n          this.pagination = res.data.pagination;\n          this.getCategories();\n          setTimeout(() => {\n            this.isLoading = false;\n          }, 4000);\n        } else {\n          alert(res.data.message);\n        }\n      });\n    },\n    getCategories() {\n      // 避免直接使用proxy 原型\n      const categories = new Set();\n      this.products.forEach((item) => {\n        categories.add(item.category);\n      });\n\n      // 抓到型別之後 set 轉回proxy\n      this.categories = [...categories];\n      console.log(categories);\n    },\n    getProduct(id) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${id}`;\n      this.loadingStatus.loadingItem = id;\n      this.$http.get(url).then((res) => {\n        if (res.data.success) {\n          console.log(res);\n          this.loadingStatus.loadingItem = \"\";\n          this.product = res.data.product;\n          this.isLoading = false;\n\n          // 這是單一商品燈箱的頁面\n          this.$refs.userProductModal.openModal();\n          // 動員素綁定\n        } else {\n          alert(res.data.message);\n        }\n      });\n\n      // [說明]: product_id(String)、qty(Number) 為必填欄位\n      // 支援合併購物車品項：當加入相同商品時會自動累加數量\n      // [參數]: { \"data\": { \"product_id\":\"-L9tH8jxVb2Ka_DYPwng\",\"qty\":1 } }\n\n      //取得單一商品一定要帶id\n    },\n\n    addToCart(id, qty = 1) {\n      // 前面是參數 後面是預設值 addToCart( id , qty = 1)\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart `;\n      console.log(id);\n      this.loadingStatus.loadingItem = id;\n      console.log(this.loadingStatus.loadingItem);\n      const cart = {\n        product_id: id,\n        qty,\n      };\n\n      this.$refs.userProductModal.hideModal();\n      this.$http.post(url, { data: cart }).then((res) => {\n        if (res.data.success) {\n          alert(res.data.message);\n          this.loadingStatus.loadingItem = \"\";\n          emitter.emit(\"update-cart\");\n          this.getCart();\n          // this.$refs.userProductModal.hideModal();\n          this.isLoading = false;\n        } else {\n          alert(res.data.message);\n        }\n      });\n    },\n    scrollFunction() {\n      // domGetNewPage\n      const { domGetNewPage } = this.$refs;\n      window.addEventListener(\"scroll\", () => {\n        console.log(domGetNewPage);\n        // 取得目前滾動位址\n        //  domGetNewPage location\n        //  when scroll over the location of domGetNewPage  , it will gonna\n        //  height of screen to determine\n        const windowY = window.scrollY;\n        const windowHeight = window.innerHeight;\n        const domPosition = domGetNewPage.offsetTop;\n        console.log(windowY, windowHeight, domPosition);\n        if (\n          windowY + windowHeight > domPosition &&\n          this.pagination.has_next &&\n          !this.isloading\n        ) {\n          // console.log(\"  already over original status\");\n          this.getProducts(this.pagination.current_page + 1);\n        }\n      });\n    },\n  },\n  computed: {\n    filterProducts() {\n      return this.products.filter((item) =>\n        item.category.match(this.selectCategory)\n      );\n    },\n  },\n  mounted() {\n    window.addEventListener(\"scroll\", this.scrollFunction);\n  },\n  unmounted() {\n    window.removeEventListener(\"scroll\", this.scrollFunction);\n  },\n};\n</script>\n","import { render } from \"./ProductsLazy.vue?vue&type=template&id=7d38ac0c\"\nimport script from \"./ProductsLazy.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsLazy.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}